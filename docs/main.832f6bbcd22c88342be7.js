(()=>{"use strict";const e=e=>{const t=document.createElement("div");t.className="wrapper";const o=document.createElement("header");o.className="header";const n=document.createElement("ul");n.className="todos-container",o.append((()=>{const e=document.createElement("div");e.className="header-info";const t=document.createElement("h1");t.className="title",t.innerText="Your TODO list";const o=document.createElement("div");o.className="info-container";const n=document.createElement("p");n.className="info-item",n.id="info-item-all-header",n.innerText="All:";const a=document.createElement("p");return a.className="info-item",a.id="info-item-completed-header",a.innerText="Completed:",o.append(n,a),e.append(t,o),e})(),(()=>{const e=document.createElement("div");e.className="burger-menu";const t=document.createElement("input");t.className="burger-menu__checkbox",t.id="burger-menu-checkbox",t.type="checkbox",t.title="Hide/Show Control Menu",t.checked=!1;const o=document.createElement("label");o.className="burger-menu__label",o.setAttribute("for","burger-menu-checkbox"),o.title="Show / Hide Control Panel";const n=document.createElement("div");return n.className="burger-menu__label--pseudo",e.append(t,o,n),e})(),(()=>{const e=document.createElement("form");e.className="control-form",e.name="control-form",e.action="#",window.innerWidth>768?e.setAttribute("enable","true"):e.setAttribute("enable","false");const t=document.createElement("div");t.className="add-remove-container",e.append(t);const o=document.createElement("button");o.className="button button--del",o.id="delete-all-btn",o.type="button",o.innerText="Delete All",o.title="Clear Your Todo List",t.append(o);const n=document.createElement("button");n.className="button button--del",n.id="delete-last-btn",n.type="button",n.innerText="Delete Last",n.title="Delete Last Todo",t.append(n);const a=document.createElement("input");a.className="text-input new-todo-input",a.id="new-todo-input",a.name="new-todo-input",a.type="text",a.placeholder="Enter new todo ...",t.append(a);const r=document.createElement("input");r.className="button",r.id="add-button",r.name="add-button",r.type="submit",r.value="Add New",r.title="Add new todo",t.append(r);const c=document.createElement("div");c.className="show-control-container",e.append(c);const l=document.createElement("div");l.className="show-radio-buttons-container";const d=document.createElement("input");d.id="show-all-radio",d.type="radio",d.name="radio-show-value",d.checked="true",d.setAttribute("enable","true");const s=document.createElement("label");s.className="button button-radio",s.id="label-show-all-radio",s.setAttribute("for","show-all-radio"),s.title="Show All Todos",l.append(d,s);const i=document.createElement("input");i.id="show-completed-radio",i.type="radio",i.name="radio-show-value",i.setAttribute("enable","false");const u=document.createElement("label");u.className="button button-radio",u.id="label-show-completed-radio",u.setAttribute("for","show-completed-radio"),u.title="Show Completed Todos",l.append(i,u);const m=document.createElement("input");m.id="show-actual-radio",m.type="radio",m.name="radio-show-value",m.setAttribute("enable","false");const p=document.createElement("label");p.className="button button-radio",p.id="label-show-actual-radio",p.setAttribute("for","show-actual-radio"),p.title="Show Actual Todos",l.append(m,p),c.append(l);const b=document.createElement("input");return b.className="text-input search-input",b.name="search-input",b.id="search-input",b.type="text",b.placeholder="Search ...",c.append(b),e})()),t.append(o,n,(()=>{const e=document.createElement("button");return e.classList="arrow-top",e.id="arrow-top",e.type="button",e})()),e.append(t)},t=e=>{const t=localStorage.getItem(e),o=JSON.parse(t);return t?o:[]},o=(e,t)=>{localStorage.setItem(t,JSON.stringify(e))},n=(e,t)=>{e.append(t)},a=(e,t)=>{e.style.display="none",t.style.display="none"},r=(e,t)=>{e.style.display="block",t.style.display="block"},c=e=>!!e.length,l=(e,t)=>e.filter((e=>e.text.toLowerCase().includes(t.toLowerCase()))),d=(e,t)=>e.reduce(((e,o)=>{switch(t){case"all":e++;break;case"completed":o.isComplete&&e++;break;case"actual":o.isComplete||e++}return e}),0),s=e=>{const t=document.createElement("p");return t.className="empty-list-message",t.innerText=e,t},i=e=>{e.scrollTo({top:1e3,behavior:"smooth"})},u=e=>{e.arrowTop.style.bottom="-50%",e.arrowTop.style.width=e.arrowTop.onclick=()=>e.todosContainer.scrollTo({top:0,behavior:"smooth"}),e.todosContainer.addEventListener("scroll",(()=>{e.todosContainer.scrollTop<20?e.arrowTop.style.bottom="-50%":e.arrowTop.style.bottom="4%"})),i(e.todosContainer)},m=(e,t)=>{switch(e){case"show-all-radio":t.showAllRadioBtn.checked="true",t.showAllRadioBtn.setAttribute("enable","true"),t.showCompletedRadioBtn.setAttribute("enable","false"),t.showActualRadioBtn.setAttribute("enable","false");break;case"show-completed-radio":t.showAllRadioBtn.setAttribute("enable","false"),t.showCompletedRadioBtn.setAttribute("enable","true"),t.showActualRadioBtn.setAttribute("enable","false");break;case"show-actual-radio":t.showCompletedRadioBtn.setAttribute("enable","false"),t.showAllRadioBtn.setAttribute("enable","false"),t.showActualRadioBtn.setAttribute("enable","true")}},p=(e,t,o,n)=>{const a=document.createElement("div");a.className="todo-body",a.id=`todo-body-${n}`,o&&(a.style.backgroundColor="#8bd5e7");const r=document.createElement("div");r.className="todo-body-container",a.append(r);const c=document.createElement("input");c.className="todo-checkbox",c.id=`todo-checkbox-${n}`,c.name="todo-checkbox",c.type="checkbox",c.checked=o,r.append(c);const l=document.createElement("label");l.setAttribute("for",`todo-checkbox-${n}`),l.className="todo-checkbox-label",l.id=`todo-checkbox-label-${n}`,l.title="Complete current todo",r.append(l);const d=document.createElement("p");d.className="todo-text",d.id=`todo-text-${n}`,d.innerText=t,r.append(d);const s=document.createElement("button");s.className="button todo-close-button",s.id=`close-button-${n}`,s.type="button",s.title="Delete Current Todo",r.append(s);const i=document.createElement("span");return i.className="todo-date",i.id=`todo-date-${n}`,i.innerText=e,a.append(i),a},b=(e,t,o)=>{e.forEach((e=>{switch(t){case"all":o.append(p(e.date,e.text,e.isComplete,e.id));break;case"completed":e.isComplete&&o.append(p(e.date,e.text,e.isComplete,e.id));break;case"actual":e.isComplete||o.append(p(e.date,e.text,e.isComplete,e.id))}}))};function h(e){return"true"===e.getAttribute("enable")}function w(e,t,o){d(e,t)?b(e,t,o.todosContainer):o.searchInput.value?n(o.todosContainer,s(`${t.toUpperCase()} todos not found :(`)):n(o.todosContainer,s(`:) You have no ${t.toUpperCase()} todos!`))}const y=e=>{!function(e,t){c(t)?r(e.deleteAllBtn,e.deleteLastBtn):a(e.deleteAllBtn,e.deleteLastBtn)}(e,t("todos")),function(e){const o=t("todos");e.allTodosInfoHeader.innerText=`All: ${o.length}`,e.completedTodosInfoHeader.innerText=`Completed: ${d(o,"completed")}`}(e),e.todosContainer.innerHTML="",function(e){const o=t("todos"),a=l(o,e.searchInput.value);if(!c(o))return n(e.todosContainer,s(":) Your list is empty!")),void m("show-all-radio",e);c(a)||!e.searchInput.value?(h(e.showAllRadioBtn)&&w(a,"all",e),h(e.showCompletedRadioBtn)&&w(a,"completed",e),h(e.showActualRadioBtn)&&w(a,"actual",e)):n(e.todosContainer,s("Todos not found :("))}(e),u(e)},f=e=>{e.style.display="block"},E=(e,t)=>{const o=document.createElement("div");o.classList="modal-window";const n=document.createElement("div");n.classList="modal-window-container";const a=document.createElement("p");a.classList="modal-window__message",a.innerText=t,n.append(a);const r=document.createElement("button");switch(r.type="button",r.id="button-cancel",r.classList="button button--cancel",e){case"confirm":{const e=document.createElement("button");e.type="button",e.classList="button button--confirm",e.id="button-confirm",e.innerText="YES",r.innerText="NO",n.append(e,r);break}case"warning":r.innerText="OK",n.append(r)}o.append(n);document.querySelector("#root").before(o)};const g=(e,n="",a)=>{E("confirm",`Are you sure to remove ${e}?`);const r=document.querySelector(".modal-window");document.querySelector(".modal-window-container").addEventListener("click",(c=>{"button-confirm"===c.target.id&&(!function(e,n="",a){const r=t("todos");switch(e){case"ALL":r.length=0,m("show-all-radio",a);break;case"LAST":r.length>0&&(r.length=r.length-1),m("show-all-radio",a);break;case"CURRENT":{const e=n.split("-");r.forEach(((t,o)=>{t.id===Number(e.at(-1))&&r.splice(o,1)}))}}o(r,"todos")}(e,n,a),r.remove(),y(a)),"button-cancel"===c.target.id&&r.remove()}))},A=()=>{const e=new Date;return new Intl.DateTimeFormat("en-UK",{weekday:"long",day:"numeric",month:"short",hour:"2-digit",minute:"numeric"}).format(e)},k=()=>{const e=document.querySelector(".modal-window");document.querySelector(".modal-window-container").addEventListener("click",(t=>{"button-cancel"===t.target.id&&e.remove()}))};const C=e=>{const n=t("todos");var a,r;a=n,(""===(r=e.newTodoInput.value)?(E("warning","You can't add empty todo!"),k(),0):!function(e,t){return 0!==e.reduce(((e,o,n)=>(t===o.text&&(e+=1),e)),0)}(a,r)||(E("warning","This todo is already exist!"),k(),0))&&(o(function(e,t){return e.push({id:Date.now(),date:A(),text:t,isComplete:!1}),e}(n,e.newTodoInput.value),"todos"),e.newTodoInput.value="",m("show-all-radio",e),y(e))},T=e=>{e.setAttribute("enable","false")},x=e=>{e.setAttribute("enable","true")};const v=(e,n)=>{const a=t("todos"),r=function(e){const t=e.split("-");return Number(t.at(-1))}(e);o(function(e,t){return e.forEach(((o,n)=>{o.id===t&&(e[n].isComplete=!e[n].isComplete)})),e}(a,r),"todos"),y(n)},N=e=>{e.todosContainer.addEventListener("click",(t=>{"button"===t.target.type&&g("CURRENT",t.target.id,e),"todo-checkbox-label"===t.target.className&&v(t.target.id,e)})),e.controlForm.addEventListener("click",(t=>{switch(t.target.id){case"add-button":t.preventDefault(),C(e);break;case"delete-all-btn":g("ALL","",e);break;case"delete-last-btn":g("LAST","",e);break;case"search-input":(e=>{e.searchInput.oninput=t=>{y(e),u(e)}})(e)}"radio"===t.target.type&&((e,t)=>{m(e.id,t),y(t),u(t)})(t.target,e)})),e.burgerMenuLabel.addEventListener("click",(t=>{(e=>{var t,o;t=e.controlForm,o=e.burgerMenuCheckbox,t.setAttribute("enable",`${!o.checked}`)})(e),i(e.todosContainer)})),window.addEventListener("resize",(t=>{(e=>{var t;window.innerWidth>768?(t=e.controlForm,e.burgerMenuCheckbox.checked=!1,t.setAttribute("enable","true"),e.burgerMenu.style.display="none"):(f(e.burgerMenu),!1===e.burgerMenuCheckbox.checked?T(e.controlForm):x(e.controlForm)),window.innerHeight<400&&(f(e.burgerMenu),!1===e.burgerMenuCheckbox.checked?T(e.controlForm):x(e.controlForm))})(e),i(e.todosContainer)}))};(t=>{e(t);const o={showAllRadioBtn:document.querySelector("#show-all-radio"),showCompletedRadioBtn:document.querySelector("#show-completed-radio"),showActualRadioBtn:document.querySelector("#show-actual-radio"),allTodosInfoHeader:document.querySelector("#info-item-all-header"),completedTodosInfoHeader:document.querySelector("#info-item-completed-header"),deleteAllBtn:document.querySelector("#delete-all-btn"),deleteLastBtn:document.querySelector("#delete-last-btn"),todosContainer:document.querySelector(".todos-container"),searchInput:document.querySelector("#search-input"),newTodoInput:document.querySelector("#new-todo-input"),burgerMenu:document.querySelector(".burger-menu"),burgerMenuCheckbox:document.querySelector("#burger-menu-checkbox"),burgerMenuLabel:document.querySelector(".burger-menu__label"),controlForm:document.querySelector(".control-form"),arrowTop:document.querySelector("#arrow-top")};y(o),u(o),(e=>{window.innerWidth>=768&&(e.burgerMenu.style.display="none")})(o),N(o)})(document.querySelector("#root"))})();